<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiZhen - A Pocketful of Delight</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        /* Custom styles for a charming feel */
        body {
            font-family: 'Nunito', sans-serif;
            scroll-behavior: smooth;
        }

        .btn-primary {
            background-color: #D87D4A; color: white; font-weight: 800; padding: 1rem 2rem; font-size: 1.125rem; border-radius: 9999px; 
            box-shadow: 0 5px 0px #b56539; transition: all 0.15s ease-in-out; display: inline-block;
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 7px 0px #b56539; }
        .btn-primary:active { transform: translateY(2px); box-shadow: 0 2px 0px #b56539; }
        
        .btn-secondary-bubbly {
            background-color: #A3B899; color: white; font-weight: 800; padding: 1rem 2rem; font-size: 1.125rem; border-radius: 9999px;
            box-shadow: 0 5px 0px #82947a; transition: all 0.15s ease-in-out; display: inline-block;
        }
        .btn-secondary-bubbly:hover { transform: translateY(-2px); box-shadow: 0 7px 0px #82947a; }
        .btn-secondary-bubbly:active { transform: translateY(2px); box-shadow: 0 2px 0px #82947a; }
        
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1); width: 36px; height: 36px; border-radius: 50%;
            border-left-color: #D87D4A; animation: spin 1s ease infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        @media (max-width: 640px) {
            .btn-primary, .btn-secondary-bubbly { padding: 0.75rem 1.5rem; font-size: 1rem; }
            .product-item .btn-primary { padding: 0.5rem 1rem; font-size: 0.875rem; }
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'peach-puff-100': '#FFF0E5', 'terracotta-500': '#D87D4A', 'sage-green-500': '#A3B899',
                        'warm-gray-800': '#4C4C4C', 'warm-gray-600': '#7a7a7a',
                    },
                    fontFamily: { 'sans': ['Nunito', 'sans-serif'], },
                }
            }
        }
    </script>
</head>
<body class="bg-peach-puff-100 text-warm-gray-800">

    <header class="sticky top-0 bg-peach-puff-100 bg-opacity-90 backdrop-blur-sm z-50 shadow-sm">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl sm:text-3xl font-extrabold text-warm-gray-800">MiZhen</a>
            <nav class="hidden md:flex items-center space-x-2">
                <a href="#home" class="px-4 py-2 rounded-full transition-all duration-300 ease-in-out hover:bg-terracotta-500 hover:text-white hover:-translate-y-1 hover:shadow-lg">Home</a>
                <a href="#shop" class="px-4 py-2 rounded-full transition-all duration-300 ease-in-out hover:bg-terracotta-500 hover:text-white hover:-translate-y-1 hover:shadow-lg">Products</a>
                <a href="#about" class="px-4 py-2 rounded-full transition-all duration-300 ease-in-out hover:bg-terracotta-500 hover:text-white hover:-translate-y-1 hover:shadow-lg">About</a>
                <a href="#how-to-order" class="px-4 py-2 rounded-full transition-all duration-300 ease-in-out hover:bg-terracotta-500 hover:text-white hover:-translate-y-1 hover:shadow-lg">How to Order</a>
            </nav>
            <div class="flex items-center">
                 <a href="https://www.instagram.com/_mi_zhen" target="_blank" class="hidden md:block text-warm-gray-600 hover:text-terracotta-500 transition-colors"><i data-feather="instagram" class="w-6 h-6"></i></a>
                <button id="mobile-menu-button" class="md:hidden ml-4"><i data-feather="menu"></i></button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
            <a href="#home" class="block py-2 text-center hover:bg-terracotta-500 hover:text-white rounded-md">Home</a>
            <a href="#shop" class="block py-2 text-center hover:bg-terracotta-500 hover:text-white rounded-md">Products</a>
            <a href="#about" class="block py-2 text-center hover:bg-terracotta-500 hover:text-white rounded-md">About</a>
            <a href="#how-to-order" class="block py-2 text-center hover:bg-terracotta-500 hover:text-white rounded-md">How to Order</a>
        </div>
    </header>

    <main>
        <section id="home" class="container mx-auto px-6 py-16 md:py-28 overflow-hidden">
            <div class="flex flex-col md:flex-row items-center gap-12">
                <div class="md:w-1/2 text-center md:text-left">
                    <h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold leading-tight mb-4">Small Treasures, Big Smiles.</h1>
                    <p class="text-lg text-warm-gray-600 max-w-xl mx-auto md:mx-0 mb-8">Welcome to our curated collection of charming decor. Explore our world and find the perfect little something to brighten your space.</p>
                    <a href="https://www.instagram.com/_mi_zhen" target="_blank" class="btn-primary inline-block">Order on Instagram</a>
                </div>
                <div class="md:w-1/2 mt-8 md:mt-0 flex items-center justify-center">
                    <div id="hero-collage" class="relative w-72 h-72 sm:w-80 sm:h-80 md:w-96 md:h-96">
                        <div class="absolute inset-0 bg-sage-green-500 rounded-full shadow-2xl"></div>
                        <img src="https://placehold.co/200x200/D87D4A/FFF0E5?text=..." alt="Cute decor item 1" class="absolute top-2 left-4 w-28 h-28 sm:w-32 sm:h-32 md:w-40 md:h-40 rounded-full shadow-lg border-4 border-white transform rotate-12 transition-transform hover:scale-110">
                        <img src="https://placehold.co/200x200/FFF0E5/4C4C4C?text=..." alt="Cute decor item 2" class="absolute bottom-4 right-0 w-32 h-32 sm:w-40 sm:h-40 md:w-48 md:h-48 rounded-2xl shadow-lg border-4 border-white transform -rotate-12 transition-transform hover:scale-110 z-10">
                        <img src="https://placehold.co/200x200/D87D4A/FFF0E5?text=..." alt="Cute decor item 3" class="absolute bottom-0 left-0 w-24 h-24 sm:w-28 sm:h-28 md:w-32 md:h-32 rounded-lg shadow-lg border-4 border-white transform rotate-6 transition-transform hover:scale-110">
                        <img src="https://placehold.co/200x200/A3B899/FFF0E5?text=..." alt="Cute decor item 4" class="absolute top-8 right-8 w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 rounded-full shadow-lg border-4 border-white transform rotate-3 transition-transform hover:scale-110">
                    </div>
                </div>
            </div>
        </section>

        <section id="shop" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center mb-4">Our Curated Collection</h2>
                <p class="text-center text-warm-gray-600 mb-12">Each piece is chosen to bring a little bit of joy to your home. Find your new favorite!</p>
                <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div id="loading-state" class="col-span-full flex flex-col items-center justify-center py-16">
                        <div class="loading-spinner"></div>
                        <p class="mt-4 text-warm-gray-600">Loading treasures...</p>
                    </div>
                </div>
                <div id="load-more-container" class="text-center mt-12" style="display: none;"><button id="load-more-btn" class="btn-primary"><span id="load-more-text" class="inline-flex items-center space-x-2"><span>Load More</span><i data-feather="chevrons-down" class="w-5 h-5"></i></span></button></div>
            </div>
        </section>

        <section id="about" class="container mx-auto px-6 py-20">
            <div class="flex flex-col md:flex-row items-center gap-12">
                <div class="md:w-1/2"><img src="https://placehold.co/600x400/D87D4A/FFF0E5?text=Our+World" alt="Artisanal decor items arranged beautifully" class="rounded-2xl shadow-xl"></div>
                <div class="md:w-1/2 text-center md:text-left">
                    <h2 class="text-3xl font-bold mb-4">Welcome to Our World!</h2>
                    <p class="text-warm-gray-600 text-lg leading-relaxed">MiZhen started with a simple idea: that the little things in our homes can bring the most joy. We search for unique, beautifully crafted decor that tells a story and makes a space feel truly personal. Each item in our collection is a treasure we're excited to share with you.</p>
                </div>
            </div>
        </section>

        <section id="how-to-order" class="py-20 bg-white">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl font-bold mb-4">Ready to Order?</h2>
                <p class="text-warm-gray-600 text-lg mb-8 max-w-2xl mx-auto">We keep things simple! We handle all our orders directly through our social media pages. Just send us a message with a screenshot of the item you love!</p>
                <div class="flex justify-center items-center flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-6">
                    <a href="https://www.instagram.com/_mi_zhen" target="_blank" class="btn-primary inline-flex items-center space-x-2"><i data-feather="instagram" class="w-8 h-8"></i><span>Message on Instagram</span></a>
                    <a href="https://www.facebook.com/people/MiZhen/61579598957484/" target="_blank" class="btn-secondary-bubbly inline-flex items-center space-x-2"><i data-feather="facebook" class="w-8 h-8"></i><span>Message on Facebook</span></a>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-peach-puff-100 py-8">
        <div class="container mx-auto px-6 text-center text-warm-gray-600">
            <p>&copy; 2025 MiZhen. All Rights Reserved.</p>
            <p class="text-sm mt-2">Curating joy, one small treasure at a time.</p>
        </div>
    </footer>

    <script>
        feather.replace();
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileMenuLinks = mobileMenu.querySelectorAll('a');
        mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
        mobileMenuLinks.forEach(link => link.addEventListener('click', () => mobileMenu.classList.add('hidden')));

        document.addEventListener('DOMContentLoaded', () => {
            const productGrid = document.getElementById('product-grid');
            const loadingState = document.getElementById('loading-state');
            const heroCollage = document.getElementById('hero-collage');
            const apiEndpoint = '/.netlify/functions/getProducts';

            fetch(apiEndpoint)
                .then(response => {
                    if (!response.ok) return response.json().then(err => { throw new Error(JSON.stringify(err)) });
                    return response.json();
                })
                .then(data => {
                    const { products, siteSettings } = data;
                    loadingState.style.display = 'none';
                    if (products && products.length > 0) {
                        products.forEach(product => {
                            const { productName, price, shortDescription, productImage } = product;
                            const imageUrl = productImage?.url;
                            const productCardHTML = `
                                <div class="product-item bg-peach-puff-100 rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-shadow duration-300 flex flex-col">
                                    <img src="${imageUrl || 'https://placehold.co/400x400/D87D4A/FFF0E5?text=No+Image'}" alt="${productName || 'Product Image'}" class="w-full h-56 object-cover">
                                    <div class="p-6 flex flex-col flex-grow">
                                        <h3 class="font-bold text-xl mb-2">${productName || 'Untitled Product'}</h3>
                                        <p class="text-warm-gray-600 text-base flex-grow">${shortDescription || ''}</p>
                                        <p class="text-2xl font-extrabold mt-4 mb-4">à§³${price || 'N/A'}</p>
                                        <a href="https://www.instagram.com/_mi_zhen" target="_blank" class="btn-primary mt-auto text-center">Order on Instagram</a>
                                    </div>
                                </div>`;
                            productGrid.insertAdjacentHTML('beforeend', productCardHTML);
                        });
                        initializeLoadMore();
                    } else {
                        productGrid.innerHTML = '<p class="col-span-full text-center text-warm-gray-600">No treasures found yet. Check back soon!</p>';
                    }

                    const heroImages = siteSettings?.heroImagesCollection?.items;
                    if (heroImages && heroImages.length > 0) {
                        const collageImages = heroCollage.querySelectorAll('img');
                        collageImages.forEach((imgTag, index) => {
                            if (heroImages[index]) imgTag.src = heroImages[index].url;
                        });
                    }
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                    loadingState.style.display = 'none';
                    productGrid.innerHTML = '<p class="col-span-full text-center text-red-500">Could not load treasures. Please check your API keys and Netlify function logs for more details.</p>';
                });
        });

        function initializeLoadMore() {
            const productItems = document.querySelectorAll('.product-item');
            const loadMoreBtn = document.getElementById('load-more-btn');
            const loadMoreContainer = document.getElementById('load-more-container');
            const loadMoreText = document.getElementById('load-more-text');
            const initialItems = 4;
            let visibleItems = initialItems;
            let allLoaded = false;

            productItems.forEach((item, index) => { if (index >= initialItems) item.style.display = 'none'; });

            if (productItems.length <= initialItems) {
                loadMoreContainer.style.display = 'none';
                return;
            } else {
                 loadMoreContainer.style.display = 'block';
            }

            loadMoreBtn.addEventListener('click', () => {
                if (allLoaded) {
                    productItems.forEach((item, index) => { if (index >= initialItems) item.style.display = 'none'; });
                    visibleItems = initialItems;
                    allLoaded = false;
                    loadMoreText.innerHTML = `<span>Load More</span><i data-feather="chevrons-down" class="w-5 h-5"></i>`;
                } else {
                    const nextVisibleItems = visibleItems + 4;
                    for (let i = visibleItems; i < nextVisibleItems && i < productItems.length; i++) {
                        productItems[i].style.display = 'flex';
                    }
                    visibleItems = nextVisibleItems;
                    if (visibleItems >= productItems.length) {
                        allLoaded = true;
                        loadMoreText.innerHTML = `<span>Show Less</span><i data-feather="chevrons-up" class="w-5 h-5"></i>`;
                    }
                }
                feather.replace();
            });
        }
    </script>
</body>
</html>

